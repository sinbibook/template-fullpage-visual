<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="숙소 설명">
    <meta name="keywords" content="SEO 키워드">
    <title>예약안내 - 숙소명</title>

    <!-- Preload critical resources -->
    <link rel="preload" href="styles/common.css" as="style">
    <link rel="preload" href="styles/reservation.css" as="style">
    <link rel="stylesheet" href="styles/common.css">
    <link rel="stylesheet" href="styles/slider.css">
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/reservation.css">

</head>
<body>

    <!-- Main Content -->
    <main class="main-content">

        <!-- CUSTOM FIELD : 메인 소개 섹션 -->
        <section class="main-section fullscreen-slider">
          <div class="fullscreen-slider-container">
            <div class="fullscreen-slider-inner">
              <!-- 메인 소개 섹션 업로드 이미지 전체 순서대로 매핑 -->
              <div class="fullscreen-slide active">
                <img src="https://images.unsplash.com/photo-1445019980597-93fa8acb246c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&h=1080&q=80" alt="예약 안내">
              </div>
              <div class="fullscreen-slide">
                <img src="https://images.unsplash.com/photo-1582719508461-905c673771fd?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&h=1080&q=80" alt="리셉션 데스크">
              </div>
              <div class="fullscreen-slide">
                <img src="https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?ixlib=rb-4.0.3&auto=format&fit=crop&w=1920&h=1080&q=80" alt="예약 옵션">
              </div>
            </div>

            <!-- 하드코딩 fix! -->
            <div class="fullscreen-slider-content">
              <h2 class="fullscreen-slider-title centered">Reservation</h2>
            </div>

            <div class="fullscreen-slider-nav">
              <span class="nav-arrow nav-prev">‹</span>
              <span class="nav-current">01</span>
              <span class="nav-divider">|</span>
              <span class="nav-total">03</span>
              <span class="nav-arrow nav-next">›</span>
            </div>
          </div>
        </section>

    </main>

    <div class="reservation-page">

        <section class="reservation-info-section main-content-fade-in">
            <div class="reservation-intro-section">
                <div class="reservation-intro-content">
                    <div class="reservation-label">
                        <!-- CUSTOM FIELD : 이용안내 섹션 타이틀 매핑 -->
                        <span class="reservation-number" data-reservation-title></span>
                    </div>
                    <!-- CUSTOM FIELD : 이용안내 섹션 설명 매핑 -->
                    <p class="reservation-description" data-reservation-description></p>
                </div>
            </div>

            <div class="reservation-book-now">
                <a href="#" class="reservation-book-btn">BOOK NOW</a>
            </div>

            <div class="reservation-content-layout">
                <div class="reservation-info-content">
                    <div class="reservation-details-section">
                        <!-- 숙소 이용안내 매핑 -->
                        <div class="reservation-box animate-element">
                            <div class="reservation-box-image">
                                 <!-- images/에 있는 이미지 fix (이미지 추가예정) -->
                                <img src="https://images.unsplash.com/photo-1445019980597-93fa8acb246c?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=300&q=80" alt="이용안내 이미지">
                            </div>
                            <h3 class="reservation-box-title">이용안내</h3>
                            <!-- 숙소 이용안내 텍스트 매핑 -->
                            <div class="reservation-box-content reservation-text-content" data-usage-guide></div>
                        </div>

                        <!-- 숙소 운영정보 매핑 -->
                        <div class="reservation-box animate-element">
                            <div class="reservation-box-image">
                                <!-- images/에 있는 이미지 fix (이미지 추가예정) -->
                                <img src="https://images.unsplash.com/photo-1582719508461-905c673771fd?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=300&q=80" alt="입퇴실 안내 이미지">
                            </div>
                            <h3 class="reservation-box-title">입/퇴실 안내</h3>
                            <div class="reservation-box-content">
                                <!-- 체크인/체크아웃 시간 -->
                                <div class="checkin-checkout-times">
                                    <div class="detail-item">
                                        <span class="detail-label">체크인</span>
                                        <span class="detail-value" data-checkin-time></span>
                                    </div>
                                    <div class="detail-item">
                                        <span class="detail-label">체크아웃</span>
                                        <span class="detail-value" data-checkout-time></span>
                                    </div>
                                </div>
                                <!-- 운영정보 텍스트 -->
                                <div class="operation-info-section">
                                    <div class="reservation-text-content operation-info-text" data-operation-info></div>
                                </div>
                            </div>
                        </div>

                        <!-- 숙소 환불정책 매핑 -->
                        <div class="reservation-box refund-box animate-element">
                            <div class="reservation-box-image">
                                <!-- images/에 있는 이미지 fix (이미지 추가예정) -->
                                <img src="https://images.unsplash.com/photo-1551882547-ff40c63fe5fa?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&h=300&q=80" alt="환불 안내 이미지">
                            </div>
                            <h3 class="reservation-box-title">환불/취소수수료</h3>
                            <div class="refund-content">
                                <div class="refund-table-section">
                                    <h4 class="refund-section-title">환불 규정표</h4>
                                    <div class="refund-table-wrapper">
                                        <!-- 환불 정책 테이블 매핑 -->
                                        <table class="refund-table">
                                            <thead>
                                                <tr>
                                                    <th>취소 시점</th>
                                                    <th>환불율</th>
                                                </tr>
                                            </thead>
                                            <tbody class="refund-table-body">
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                                <div class="refund-text-section">
                                    <h4 class="refund-section-title">취소 및 환불 안내</h4>
                                    <!-- 환불 정책 안내문 텍스트 매핑 : 없을 시 display : none -->
                                    <div class="refund-notes reservation-text-content" data-refund-notes></div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

        </section>
    </div>

    <!-- Include ImageWithFallback script -->
    <script src="js/image-with-fallback.js"></script>

    <!-- Image Helpers -->
    <script src="js/image-helpers.js"></script>

    <!-- Base Data Mapper -->
    <script src="js/data-mapper/core/base-mapper.js"></script>

    <!-- Reservation Page Mapper -->
    <script src="js/data-mapper/pages/reservation-mapper.js"></script>

    <!-- Preview Handler for Admin Integration -->
    <script src="js/preview-handler.js"></script>

    <!-- Header Footer Mapper -->
    <script src="js/data-mapper/pages/header-footer-mapper.js"></script>

    <!-- Header and Footer Loader -->
    <script src="js/header-footer-loader.js"></script>

    <!-- Fullscreen Slider Component -->
    <script src="js/components/fullscreen-slider.js"></script>

    <!-- Page-specific script -->
    <script src="js/pages/reservation.js"></script>

    <!-- 동적 화살표 스크립트 -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const textContents = document.querySelectorAll('.reservation-text-content');

            textContents.forEach(function(content) {
                const text = content.textContent.trim();
                const lines = text.split('\n').filter(line => line.trim() !== '');

                // 불릿 문자를 화살표로 대체
                const processedLines = lines.map(line => {
                    const trimmedLine = line.trim();
                    if (trimmedLine.startsWith('•') ||
                        trimmedLine.startsWith('-') ||
                        trimmedLine.startsWith('*') ||
                        trimmedLine.length > 10) {
                        return '>';
                    }
                    return '';
                }).filter(arrow => arrow !== '');

                // 원본 텍스트에서 불릿 문자 제거
                const cleanedText = text.split('\n').map(line => {
                    const trimmedLine = line.trim();
                    if (trimmedLine.startsWith('•')) {
                        return line.replace('•', '').trim();
                    } else if (trimmedLine.startsWith('-')) {
                        return line.replace('-', '').trim();
                    } else if (trimmedLine.startsWith('*')) {
                        return line.replace('*', '').trim();
                    }
                    return line;
                }).join('\n');

                // 원본 텍스트 내용 업데이트
                content.innerHTML = cleanedText;

                const arrows = processedLines.join('\n');

                // 기존 화살표 요소가 있으면 제거
                const existingArrow = content.querySelector('.dynamic-arrows');
                if (existingArrow) {
                    existingArrow.remove();
                }

                // 새 화살표 요소 추가
                const arrowElement = document.createElement('div');
                arrowElement.className = 'dynamic-arrows';
                arrowElement.style.cssText = `
                    position: absolute;
                    left: 20px;
                    top: 15px;
                    color: #7a8471;
                    font-weight: bold;
                    line-height: 1.8;
                    white-space: pre-line;
                    pointer-events: none;
                `;
                arrowElement.textContent = arrows;
                content.appendChild(arrowElement);
            });
        });
    </script>

</body>
</html>
